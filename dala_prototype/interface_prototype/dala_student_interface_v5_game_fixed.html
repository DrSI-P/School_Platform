
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DALA Student Interface Prototype - Gamified!</title>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap");

        body {{
            font-family: "Nunito", sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #e0f7fa; /* Light cyan background */
            color: #333;
            line-height: 1.6;
        }}
        .container {{
            background-color: #ffffff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 20px auto;
        }}
        h1 {{
            color: #00796b; /* Teal */
            text-align: center;
            margin-bottom: 25px;
        }}
        h2 {{
            color: #004d40; /* Darker Teal */
            border-bottom: 2px solid #b2dfdb; /* Light teal border */
            padding-bottom: 10px;
            margin-top: 30px;
        }}
        h3 {{
            color: #00695c; /* Medium Teal */
            margin-top: 20px;
        }}
        .task-section, .profile-section, .pathway-section, .accessibility-controls, .game-section {{
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f1f8e9; /* Light green accent */
            border: 1px solid #c8e6c9; /* Green border */
            border-radius: 8px;
        }}
        .button {{
            background-color: #ff7043; /* Coral */
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 20px; /* Rounded buttons */
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.3s ease;
            margin-right: 10px;
        }}
        .button:hover {{
            background-color: #f4511e; /* Darker Coral */
        }}
        .button[disabled] {{
            background-color: #bdbdbd;
            cursor: not-allowed;
        }}
        ul {{
            list-style-type: none;
            padding-left: 0;
        }}
        li {{
            background-color: #ffffff;
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 6px;
            border-left: 5px solid #4db6ac; /* Teal accent border */
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }}
        .lo-title {{
            font-weight: bold;
            color: #004d40;
            font-size: 1.1em;
        }}
        .content-title {{
            margin-left: 20px;
            color: #546e7a; /* Blue-grey */
        }}
        .content-title em {{
            color: #78909c;
            font-size: 0.9em;
        }}
        pre {{
            white-space: pre-wrap;
            word-wrap: break-word;
            background-color: #eceff1; /* Light blue-grey */
            padding:15px;
            border-radius:6px;
            border:1px solid #cfd8dc;
            font-size: 0.95em;
            color: #37474f;
        }}
        strong {{ color: #d84315; /* Deep orange for emphasis */ }}
        em {{ color: #00796b; }}
        .section-icon {{
            margin-right: 8px;
            font-size: 1.2em;
        }}

        /* Star Collector Game Styles */
        #gameCanvas {{
            border: 2px solid #00796b;
            background-color: #fff;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
        }}
        .game-info {{
            font-size: 1.1em;
            color: #004d40;
            margin-bottom: 10px;
        }}
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Welcome to the DALA Adventure! üöÄ</h1>
        
        <div class="task-section">
            <h2><span class="section-icon">üé®</span>1. About You & How You Learn</h2>
            <p>Let's find out a bit more to help personalize your learning journey!</p>
            <h3>Your Learning Superpowers (Simulated)</h3>
            <p>Visual Task Preference: <em>Prefers visual style for visual tasks.</em></p>
            <p>Textual Task Preference: <em>Prefers summary_bullets style for textual tasks.</em></p>
            
            <h3>Your Awesome Interests (Simulated)</h3>
            <p>Selected Interests: <strong>Creative Writing, Music Composition</strong></p>
            
            <h3>Areas for a Helping Hand (Simulated)</h3>
            <p>What topics or skills would you like extra support with?</p>
            <p>Identified Areas: <strong>Remembering historical dates</strong></p>
        </div>

        <div class="profile-section">
            <h2><span class="section-icon">üë§</span>2. Your Unique Learner Profile</h2>
            <pre>LearnerProfile(student_id=	student_game_005	, preferences=	{&#x27;visual_task_1&#x27;: &#x27;visual&#x27;, &#x27;textual_task_1&#x27;: &#x27;concise_text&#x27;}	, interests=	[&#x27;Creative Writing&#x27;, &#x27;Music Composition&#x27;]	, struggle_areas=	[&#x27;Remembering historical dates&#x27;]	)</pre>
        </div>

        <div class="pathway-section">
            <h2><span class="section-icon">üó∫Ô∏è</span>3. Your Personalized Learning Pathway</h2>
            <ul><li><div class="lo-title">üéØ Step 1: Recall multiplication and division facts for multiplication tables up to 12 √ó 12.</div><div class="content-title">‚ú® Activity: Times Tables Practice Game (Up to 12x12) (Type: game)</div><div class="content-title"><em>üîó Access at: /content/games/timestables_y4.html (Simulated Link)</em></div></li><li><div class="lo-title">üéØ Step 2: Use place value, known and derived facts to multiply and divide mentally, including: multiplying by 0 and 1; dividing by 1; multiplying together three numbers.</div><div class="content-title">‚ú® Activity: Video: Understanding Multiplication by 0 and 1 (Type: video)</div><div class="content-title"><em>üîó Access at: /content/videos/multiply_zero_one_y4.mp4 (Simulated Link)</em></div></li><li><div class="lo-title">üéØ Step 3: Recognise and use factor pairs and commutativity in mental calculations.</div><div class="content-title">‚ú® Activity: Worksheet: Factor Pairs Fun (Type: worksheet_pdf)</div><div class="content-title"><em>üîó Access at: /content/worksheets/factor_pairs_y4.pdf (Simulated Link)</em></div></li></ul>
        </div>

        <!-- Star Collector Game Section -->
        <div class="game-section">
            <h2><span class="section-icon">üåü</span>Reward Time: Star Collector!</h2>
            <p>Great job on completing a step! Time for a quick game.</p>
            <div class="game-info">
                <span>Score: <span id="score">0</span></span> | 
                <span>Time Left: <span id="timeLeft">30</span>s</span>
            </div>
            <canvas id="gameCanvas" width="700" height="200"></canvas>
            <p id="gameMessage"></p>
            <button class="button" id="startGameButton">Play Star Collector!</button>
        </div>

        <div class="accessibility-controls">
            <h3><span class="section-icon">üõ†Ô∏è</span>Accessibility Tools (Coming Soon!)</h3>
            <p><button class="button" disabled>üéôÔ∏è Enable Voice Input</button></p>
            <p><button class="button" disabled>üéß Enable Text-to-Speech</button></p>
            <p>We're working on making learning accessible for everyone!</p>
        </div>

    </div>

    <script>
    // Ensure DOM is fully loaded before attaching event listeners
    document.addEventListener("DOMContentLoaded", function() {{
        // Star Collector Game Logic
        const canvas = document.getElementById("gameCanvas");
        // Check if canvas exists before getting context - crucial for preventing errors
        if (!canvas) {{
            console.error("Game canvas not found!");
            return; // Exit if canvas is not found
        }}
        const ctx = canvas.getContext("2d");
        const scoreDisplay = document.getElementById("score");
        const timeLeftDisplay = document.getElementById("timeLeft");
        const gameMessageDisplay = document.getElementById("gameMessage");
        const startGameButton = document.getElementById("startGameButton");

        // Check if all game elements are present
        if (!ctx || !scoreDisplay || !timeLeftDisplay || !gameMessageDisplay || !startGameButton) {{
            console.error("One or more game elements are missing from the DOM.");
            return; // Exit if essential elements are missing
        }}

        let score = 0;
        let timeLeft = 30;
        let gameInterval;
        let timerIntervalInstance; // To store the timer interval instance for clearing
        let stars = [];
        const starRadius = 10;
        const numStars = 15;
        let gameActive = false;

        function drawStar(x, y, spikes, outerRadius, innerRadius) {{
            let rot = Math.PI / 2 * 3;
            let step = Math.PI / spikes;

            ctx.beginPath();
            ctx.moveTo(x, y - outerRadius);
            for (let i = 0; i < spikes; i++) {{
                ctx.lineTo(x + Math.cos(rot) * outerRadius, y + Math.sin(rot) * outerRadius);
                rot += step;
                ctx.lineTo(x + Math.cos(rot) * innerRadius, y + Math.sin(rot) * innerRadius);
                rot += step;
            }}
            ctx.lineTo(x, y - outerRadius);
            ctx.closePath();
            ctx.fillStyle = "#FFD700"; // Gold color for stars
            ctx.fill();
        }}

        function createStar() {{
            return {{
                x: Math.random() * (canvas.width - starRadius * 2) + starRadius,
                y: Math.random() * -canvas.height, // Start above the canvas, spread out a bit
                speed: Math.random() * 2 + 1 // Random speed
            }};
        }}

        function updateStars() {{
            for (let i = 0; i < stars.length; i++) {{
                stars[i].y += stars[i].speed;
                // Remove star if it goes off screen at the bottom
                if (stars[i].y > canvas.height + starRadius) {{
                    stars.splice(i, 1);
                    i--; // Adjust index after removal
                }}
            }}
            // Add new stars periodically if needed and game is active
            if (gameActive && stars.length < numStars && Math.random() < 0.05) {{
                stars.push(createStar());
            }}
        }}

        function drawStars() {{
            stars.forEach(star => drawStar(star.x, star.y, 5, starRadius, starRadius / 2));
        }}

        function clearCanvas() {{
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }}

        function gameLoop() {{
            if (!gameActive) return;

            clearCanvas();
            updateStars();
            drawStars();
        }}

        function startGame() {{
            if (gameActive) return;
            console.log("Starting game...");
            gameActive = true;
            score = 0;
            timeLeft = 30;
            stars = [];
            for(let i=0; i < numStars / 2; i++) {{ stars.push(createStar()); }} // Initial stars
            scoreDisplay.textContent = score;
            timeLeftDisplay.textContent = timeLeft;
            gameMessageDisplay.textContent = "Click the stars!";
            startGameButton.disabled = true;

            // Clear any existing intervals before starting new ones
            if (gameInterval) clearInterval(gameInterval);
            if (timerIntervalInstance) clearInterval(timerIntervalInstance);

            gameInterval = setInterval(gameLoop, 50); // Approx 20 FPS
            
            timerIntervalInstance = setInterval(() => {{
                if (!gameActive) {{
                    clearInterval(timerIntervalInstance);
                    return;
                }}
                timeLeft--;
                timeLeftDisplay.textContent = timeLeft;
                if (timeLeft <= 0) {{
                    clearInterval(timerIntervalInstance);
                    endGame("Time's up! Final Score: " + score);
                }}
            }}, 1000);
        }}

        function endGame(message) {{
            console.log("Ending game: " + message);
            gameActive = false;
            clearInterval(gameInterval);
            // Note: timerIntervalInstance is cleared within its own logic when timeLeft is 0 or game becomes inactive
            gameMessageDisplay.textContent = message + " Play again?";
            startGameButton.disabled = false;
        }}

        canvas.addEventListener("click", function(event) {{
            if (!gameActive) return;
            const rect = canvas.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const clickY = event.clientY - rect.top;

            for (let i = stars.length - 1; i >= 0; i--) {{ // Iterate backwards for safe removal
                const distance = Math.sqrt(Math.pow(clickX - stars[i].x, 2) + Math.pow(clickY - stars[i].y, 2));
                if (distance < starRadius * 1.5) {{ // Generous click area
                    score++;
                    scoreDisplay.textContent = score;
                    stars.splice(i, 1); // Remove clicked star
                    // stars.push(createStar()); // Optionally add a new star immediately
                    break; 
                }}
            }}
        }});
        
        startGameButton.addEventListener("click", startGame);
    }});
    </script>
</body>
</html>
